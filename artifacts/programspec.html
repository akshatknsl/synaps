
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Program Specification &mdash; synaps 2013.2.3 documentation</title>
    
    <link rel="stylesheet" href="../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/tweaks.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2013.2.3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/jquery.tweet.js"></script>
    <link rel="top" title="synaps 2013.2.3 documentation" href="../index.html" />
    <link rel="next" title="Database Model" href="dbmodel.html" />
    <link rel="prev" title="Synaps" href="../index.html" /> 
  </head>
  <body>
  <div id="header">
    <h1 id="logo"><a href="http://www.openstack.org/">OpenStack</a></h1>
    <ul id="navigation">
      <li><a href="http://www.openstack.org/" title="Go to the Home page" class="link">Home</a></li>
      <li><a href="http://www.openstack.org/projects/" title="Go to the OpenStack Projects page">Projects</a></li>
      <li><a href="http://www.openstack.org/user-stories/" title="Go to the User Stories page" class="link">User Stories</a></li>
      <li><a href="http://www.openstack.org/community/" title="Go to the Community page" class="link">Community</a></li>
      <li><a href="http://www.openstack.org/blog/" title="Go to the OpenStack Blog">Blog</a></li>
      <li><a href="http://wiki.openstack.org/" title="Go to the OpenStack Wiki">Wiki</a></li>
      <li><a href="http://docs.openstack.org/" title="Go to OpenStack Documentation" class="current">Documentation</a></li>
    </ul>
  </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="program-specification">
<h1>Program Specification<a class="headerlink" href="#program-specification" title="Permalink to this headline">¶</a></h1>
<div class="section" id="program-architecture">
<h2>Program Architecture<a class="headerlink" href="#program-architecture" title="Permalink to this headline">¶</a></h2>
<p>If there are 1,000 VM instances in your cloud, and 10 metrics per instance are
inputed to the Synaps, it should process 10,000 metrics in a minute. And if
your cloud runs well, you would have more VMs. So it should be distributed and
scalable.</p>
<p>Synaps API is frontend of the system. Keystone can be integrated for
authentication as well as LDAP. It uses RabbitMQ for asynchronous messaging.</p>
<p>Synaps topology runs on the Twitter Storm, the real-time distributed stream
processing system. Storm manages distributing workers in the topology and
handles failed workers.</p>
<p>The topology pulls messages from the queue, aggregates metric data and
evaluates alarms in-memory, and write the result into Cassandra database. So
that it helps reducing read operations that cost a lot. It invokes actions when
the status of alarm has been changed. It can be integrated with mail server and
SMS agents to send notifications to user-specified contact list and Nova API to
reboot or migrate specified VMs.</p>
<p>Cassandra no-sql database is used for storing persistent data which is
massively fast for writing operation and provides good availability and
scalability. Deploying Cassandra and synaps-topology together can be a good
choice for performance.</p>
<p>Each component of Synaps is linear scalable.</p>
<div class="figure">
<img alt="../_images/SynapsSystemOverview.jpg" src="../_images/SynapsSystemOverview.jpg" style="width: 100%;" />
<p class="caption">Synaps Architecture Overview</p>
</div>
<p>Synaps provides AWS CloudWatch compatible API so that users can use the SDKs
for AWS CW for Synaps also. Boto, AWS CLI and AWS SDK for Java can be used
to call Synaps API.</p>
<p>Internally, it can be integrated with agent which inputs your metrics of your
cloud services so that users can monitor their resource in the cloud.</p>
<p>For example, VMMON which can get information from VM Hyperisor via libvirt APIs
and Nova API and put metric data to Synaps so that users can utilize the data.
But such agents are not in the scope of Synaps project.</p>
<div class="figure">
<img alt="../_images/IntegratedSystemOverview.jpg" src="../_images/IntegratedSystemOverview.jpg" style="width: 100%;" />
<p class="caption">Synaps Integration Example</p>
</div>
</div>
<div class="section" id="synaps-api-description">
<h2>Synaps API description<a class="headerlink" href="#synaps-api-description" title="Permalink to this headline">¶</a></h2>
<p>Synaps API is WSGI based web server which provides AWS CloudWatch compatible
API.</p>
<div class="section" id="asynchronous-request-processing">
<h3>Asynchronous request processing<a class="headerlink" href="#asynchronous-request-processing" title="Permalink to this headline">¶</a></h3>
<p>Actions below are processed asynchronously.</p>
<ul class="simple">
<li>DeleteAlarms</li>
<li>PutMetricAlarm</li>
<li>PutMetricData</li>
<li>DisableAlarmActions</li>
<li>EnableAlarmActions</li>
<li>SetAlarmState</li>
</ul>
<div class="figure">
<img alt="../_images/SynapsAPI-PutMetricData.jpg" src="../_images/SynapsAPI-PutMetricData.jpg" style="width: 100%;" />
<p class="caption">Example of asynchronous message processing</p>
</div>
</div>
<div class="section" id="synchronous-request-processing">
<h3>Synchronous request processing<a class="headerlink" href="#synchronous-request-processing" title="Permalink to this headline">¶</a></h3>
<p>Actions below are processed synchronously.</p>
<ul class="simple">
<li>DescribeAlarmHistory</li>
<li>DescribeAlarms</li>
<li>DescribeAlarmsForMetric</li>
<li>GetMetricStatistics</li>
<li>ListMetrics</li>
</ul>
<p>For example,</p>
<div class="figure">
<img alt="../_images/SynapsAPI-GetMetricStatistics.jpg" src="../_images/SynapsAPI-GetMetricStatistics.jpg" style="width: 100%;" />
<p class="caption">Example of synchronous message processing</p>
</div>
</div>
</div>
<div class="section" id="synaps-topology-description">
<h2>Synaps topology description<a class="headerlink" href="#synaps-topology-description" title="Permalink to this headline">¶</a></h2>
<p>Synaps topology is aimed to run on the Twitter Storm, real-time distributed
stream processing system.</p>
<blockquote>
<div><div class="figure">
<img alt="../_images/SynapsStorm-Topology.jpg" src="../_images/SynapsStorm-Topology.jpg" style="width: 100%;" />
<p class="caption">Synaps topology for Storm</p>
</div>
</div></blockquote>
<div class="section" id="putmetricdata-message-processing">
<h3>PutMetricData message processing<a class="headerlink" href="#putmetricdata-message-processing" title="Permalink to this headline">¶</a></h3>
<p>This function is the most important part of Synaps. When the PutMetricData
message is received via RabbitMQ message queue, it reads its in-memory sliding
windows or database to aggregate its datapoints and evalutate status of
its alarms. If the status is changed, it sends action message to notification
queue.</p>
<div class="figure">
<img alt="../_images/SynapsStorm-PutMetricData.jpg" src="../_images/SynapsStorm-PutMetricData.jpg" style="width: 100%;" />
<p class="caption">Synaps topology - PutMetricData</p>
</div>
</div>
<div class="section" id="putmetricalarm-message-processing">
<h3>PutMetricAlarm message processing<a class="headerlink" href="#putmetricalarm-message-processing" title="Permalink to this headline">¶</a></h3>
<p>When the PutMetricAlarm message is received via RabbitMQ message queue, it
find its metric and update its in-memory alarm data and update it into
database.</p>
<div class="figure">
<img alt="../_images/SynapsStormPutMetricAlarm.jpg" src="../_images/SynapsStormPutMetricAlarm.jpg" style="width: 100%;" />
<p class="caption">Synaps topology - PutMetricAlarm</p>
</div>
</div>
<div class="section" id="periodicmonitoring-message-processing">
<h3>PeriodicMonitoring message processing<a class="headerlink" href="#periodicmonitoring-message-processing" title="Permalink to this headline">¶</a></h3>
<p>&#8216;check_spout&#8217; generates PeriodicMonitoring message every 1 minute. When this is
generated, it checks their whole alarms if they are not evaluated alarms
recently PutMetricData message processing.</p>
<div class="figure">
<img alt="../_images/SynapsStormPeriodicMonitoring.jpg" src="../_images/SynapsStormPeriodicMonitoring.jpg" style="width: 100%;" />
<p class="caption">Synaps topology - PeriodicMonitoring</p>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3><a href="../index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference internal" href="#">Program Specification</a><ul>
<li><a class="reference internal" href="#program-architecture">Program Architecture</a></li>
<li><a class="reference internal" href="#synaps-api-description">Synaps API description</a><ul>
<li><a class="reference internal" href="#asynchronous-request-processing">Asynchronous request processing</a></li>
<li><a class="reference internal" href="#synchronous-request-processing">Synchronous request processing</a></li>
</ul>
</li>
<li><a class="reference internal" href="#synaps-topology-description">Synaps topology description</a><ul>
<li><a class="reference internal" href="#putmetricdata-message-processing">PutMetricData message processing</a></li>
<li><a class="reference internal" href="#putmetricalarm-message-processing">PutMetricAlarm message processing</a></li>
<li><a class="reference internal" href="#periodicmonitoring-message-processing">PeriodicMonitoring message processing</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="../index.html"
                                  title="previous chapter">Synaps</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="dbmodel.html"
                                  title="next chapter">Database Model</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="../_sources/artifacts/programspec.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="../search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="dbmodel.html" title="Database Model"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../index.html" title="Synaps"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">synaps 2013.2.3 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012-present, Samsung SDS.
      Last updated on Sun Feb 23 22:17:34 2014, commit e8daf4b.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>